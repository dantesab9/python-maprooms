mode: prod  # debug, devel or prod
prefix: https://iridl.ldeo.columbia.edu
core_path: /fbfmaproom
admin_path: /fbfmaproom-admin
tile_path: /fbfmaproom-tiles
support_email: help@iri.columbia.edu
bypass_dlauth: true
loglevel: info

dlauth_client:
    prefix: https://iridl.ldeo.columbia.edu
    core_path: /auth
    session_cookie_name: __dlauth_id
    application_ssid: SNIP

flask:
    host: localhost
    port: 443
    debug: false
    threaded: false
    processes: 1

bjoern:
    host: localhost
    port: 8080

dbpool:
    name: design_engine  # postgres database name
    host: localhost
    port: 5432
    user: dero  # user name
    password: SNIP
    capacity: 10  # number of connections in pool
    close_on_exception: true
    max_idle_time: 60  # (seconds)
    max_open_time: 600  # (seconds)
    max_usage_count: 1000
    recycle_interval: 60  # (seconds) set to null to disable recycler thread

shapes:
    national:
        schema: iridb
        table: g2015_2012_0
        label: adm0_name
        geom: the_geom
        key: ["adm0_code"]
    regional:
        schema: iridb
        table: g2015_2014_1
        label: adm1_name
        geom: the_geom
        key: ["adm0_code", "adm1_code"]
    district:
        schema: iridb
        table: g2015_2014_2
        label: adm2_name
        geom: the_geom
        key: ["adm0_code", "adm1_code", "adm2_code"]

dataframes:
    enso:
        schema: public
        table: fbf_maproom
    vuln:
        schema: public
        table: fbf_vulnerability

countries:
    malawi:
        logo: Malawi_IRI_98x48.png
        adm0_name: Malawi
        resolution: [1, 1]
        center: [37.5, -13]
        zoom: 7
        rotation: 0
        marker: [34, -14]
        datasets:
            rain:
                path: /data/aaron/fbf/rain-noaa.nc
                var_names:
                    rain: prcp_est
                    lat: Y
                    lon: X
                    time: T
                colormap: &raincm "[16777215 16777215 12632256 12632256 14155730
                    [14155730 21] 12841150 [12841150 23] 10215830 [10215830 23]
                    7262835 [7262835 22] 6931300 [6931300 23] 5944410 [5944410 23]
                    5285200 [5285200 23] 4625990 [4625990 22] 3966780 [3966780 23]
                    3307570 [3307570 23] 2648360 [2648360 23] 1989150]"
            pnep:
                path: /data/aaron/fbf/pnep-malawi.nc
                var_names:
                    pnep: prob
                    lat: Y
                    lon: X
                    issue: S
                    lead: L
                    pct: P
                colormap: &pnepcm "[0x0000ba 0x004fff 0x3ec5f5 0x7fffd4 0x97fc00
                    0xd8fe00 0xffe800 0xffac00 0xff7b00 0xff5900 0xff3500 0xff1300
                    0xef0000 0xd10000 0xb00000 0x8f0000 [0x800000 4]]"
            vuln:
                colormap: &vulncm "[[0xffff00 5] 0xfff500 0xffde00 0xffc300 0xffae00
                    0xff9900 0xff7e00 0xff6200 0xff4600 0xff2f00 0xff0b00 0xf70000
                    0xdb0000 0xbf0000 0xa60000 0x8a0000 [0x800000 5]]"
                range: [0.0, 5.0]
        seasons:
            season1:
                label: DJF
                target_month: 0.5  # season center in months since Jan 1: 0.0 <= season < 12.0
                length: 3.0
                issue_months: [7, 8, 9, 10]  # months since Jan 1: 0.0 <= season < 12.0
                year_range: [1983, 2021]
            season2:
                label: dJf
                target_month: 0.5  # months since Jan 1: 0.0 <= season < 12.0
                length: 3.0
                issue_months: [9, 7]  # months since Jan 1: 0.0 <= season < 12.0
                year_range: [2001, 2005]

    madagascar:
        logo: Madagascar_IRI_98x48.png
        adm0_name: Madagascar
        resolution: [.0375, .0375]
        center: [49, -23]
        zoom: 7
        rotation: 0
        marker: [45.5, -24]
        datasets:
            rain:
                path: /data/aaron/fbf/rain-madagascar.nc
                var_names:
                    rain: rfe
                    lat: Y
                    lon: X
                    time: T
                colormap: *raincm
            pnep:
                path: /data/aaron/fbf/pnep-madagascar.nc
                var_names: 
                    pnep: pne
                    lat: Y
                    lon: X
                    issue: S
                    lead: null  # dataset has forecasts for only one season; L is implicit.
                    pct: P
                colormap: *pnepcm
            vuln:
                colormap: *vulncm
                range: [0.0, 5.0]
        seasons:
            season1:
                label: DJF
                target_month: 0.5  # season center in months since Jan 1: 0.0 <= season < 12.0
                length: 3.0
                issue_months: [8, 9, 10]  # months since Jan 1: 0.0 <= season < 12.0
                year_range: [1982, 2020]

    ethiopia:
        logo: Ethiopia_IRI_98x48.png
        adm0_name: Ethiopia
        resolution: [.25, .25]
        center: [40, 6]
        zoom: 6
        rotation: 0
        marker:  [43.875, 6.875]
        datasets:
            rain:
                path: /data/aaron/fbf/rain-ethiopia.nc
                var_names:
                    rain: obs
                    lat: Y
                    lon: X
                    time: T
                colormap: *raincm
            pnep:
                path: /data/aaron/fbf/pnep-ethiopia.nc
                var_names:
                    pnep: pne
                    lat: Y
                    lon: X
                    issue: S
                    lead: null  # dataset has forecasts for only one season; L is implicit.
                    pct: P
                colormap: *pnepcm
        seasons:
            season1:
                label: MAM
                target_month: 3.5
                length: 3.0
                issue_months: [11, 0]
                year_range: [1983, 2021]

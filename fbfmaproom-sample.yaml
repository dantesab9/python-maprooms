mode: prod  # debug, devel or prod
prefix: https://iridl.ldeo.columbia.edu
core_path: /fbfmaproom
admin_path: /fbfmaproom-admin
tile_path: /fbfmaproom-tiles
support_email: help@iri.columbia.edu
bypass_dlauth: true
loglevel: info

dlauth_client:
    prefix: https://iridl.ldeo.columbia.edu
    core_path: /auth
    session_cookie_name: __dlauth_id
    application_ssid: SNIP

flask:
    host: localhost
    port: 443
    debug: false
    threaded: false
    processes: 1
    ssl_cert: keys/key.crt
    ssl_key: keys/key.key

bjoern:
    host: localhost
    port: 8080

dbpool:
    name: design_engine  # postgres database name
    host: localhost
    port: 5432
    user: dero  # user name
    password: SNIP
    capacity: 10  # number of connections in pool
    close_on_exception: true
    max_idle_time: 60  # (seconds)
    max_open_time: 600  # (seconds)
    max_usage_count: 1000
    recycle_interval: 60  # (seconds) set to null to disable recycler thread

shapes:
    national:
        schema: iridb
        table: g2015_2012_0
        label: adm0_name
        geom: the_geom
        key: ["adm0_code"]
    regional:
        schema: iridb
        table: g2015_2014_1
        label: adm1_name
        geom: the_geom
        key: ["adm0_code", "adm1_code"]
    district:
        schema: iridb
        table: g2015_2014_2
        label: adm2_name
        geom: the_geom
        key: ["adm0_code", "adm1_code", "adm2_code"]

dataframes:
    enso:
        schema: public
        table: fbf_maproom
    vuln:
        schema: public
        table: fbf_vulnerability

countries:
    malawi:
        logo: Malawi_IRI_98x48.png
        adm0_name: Malawi
        resolution: [1, 1]
        center: [37.5, -13]
        zoom: 7
        rotation: 0
        marker: [34, -14]
        datasets:
            rain:
                path: rain-noaa.nc
                var_names:
                    rain: prcp_est
                    lat: Y
                    lon: X
                    time: T
                colormap: &raincm "[16777215 16777215 12632256 12632256 14155730
                    [14155730 21] 12841150 [12841150 23] 10215830 [10215830 23]
                    7262835 [7262835 22] 6931300 [6931300 23] 5944410 [5944410 23]
                    5285200 [5285200 23] 4625990 [4625990 22] 3966780 [3966780 23]
                    3307570 [3307570 23] 2648360 [2648360 23] 1989150]"
            pnep:
                path: pnep-malawi.nc
                var_names:
                    pnep: prob
                    lat: Y
                    lon: X
                    issue: S
                    lead: L
                    pct: P
                colormap: &pnepcm "[null 12632256 8388608 [16711680 14] [16760576 13]
                    [15453831 14] 13959039 [13959039 13] 64636 [65535 25] [36095 26]
                    [255 51] [128 51] [128 51] 2763429]"
        seasons:
            season1:
                label: DJF
                target_month: 0.5  # season center in months since Jan 1: 0.0 <= season < 12.0
                length: 3.0
                issue_months: [7, 8, 9, 10]  # months since Jan 1: 0.0 <= season < 12.0
                leads: [5.5, 4.5, 3.5, 2.5]  # as appear in the dataset, i.e. may be dummy 0.0
                year_range: [1983, 2021]
            season2:
                label: dJf
                target_month: 0.5  # months since Jan 1: 0.0 <= season < 12.0
                length: 3.0
                issue_months: [9, 7]  # months since Jan 1: 0.0 <= season < 12.0
                leads: [3.5, 5.5]  # as appear in the dataset, i.e. may be dummy 0.0
                year_range: [2001, 2005]

    madagascar:
        logo: Madagascar_IRI_98x48.png
        adm0_name: Madagascar
        resolution: [.0375, .0375]
        center: [49, -23]
        zoom: 7
        rotation: 0
        marker: [45.5, -24]
        datasets:
            rain:
                path: rain-noaa.nc
                var_names:
                    rain: prcp_est
                    lat: Y
                    lon: X
                    time: T
                colormap: *raincm
            pnep:
                path: pnep-madagascar.nc
                var_names: 
                    pnep: pne
                    lat: Y
                    lon: X
                    issue: S
                    lead: L
                    pct: P
                colormap: *pnepcm
        seasons:
            season1:
                label: DJF
                target_month: 0.5  # season center in months since Jan 1: 0.0 <= season < 12.0
                length: 3.0
                issue_months: [8, 9, 10]  # months since Jan 1: 0.0 <= season < 12.0
                leads: [2.5, 2.5, 2.5]  # as appear in the dataset, i.e. may be dummy 0.0
                year_range: [1982, 2020]

